<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nh.haiyan.ordermanager.mybatis.dao.mapper.OrderQueryMapper">

    <select id="getOrderById" parameterType="Long" resultType="com.nh.haiyan.ordermanager.mybatis.model.GetAllResApplyResp">

      select id resApplyId, apply_user_code applyUserCode, apply_user_name applyUserName, apply_date_time applyDateTime, apply_status applyStatus, moduleType, dept_code deptCode
	    from(
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'domain_scan_new' moduleType, dept_code from module_domain_scan_res_apply
			UNION
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'kvm_new' moduleType, dept_code from module_kvm_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'db_new' moduleType, dept_code from module_db_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'appDeploy_new' moduleType, dept_code from module_app_deploy_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'net-acl' moduleType, dept_code from module_net_security_policy_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'net-dns' moduleType, dept_code from module_dns_analyze_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'net-lvs' moduleType, dept_code from module_vip_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'cdn_cache_clean_new' moduleType, dept_code from module_cdn_cache_clean_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'cdn_link_up_new' moduleType, dept_code from module_cdn_link_up_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'code_auth_new' moduleType, dept_code from module_code_auth_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'jms' moduleType, dept_code from module_fortress_machine_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'nginx_conf_update_new' moduleType, dept_code from module_nginx_conf_update_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'code_scan_new' moduleType, dept_code from module_code_scan_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'net-gf' moduleType, dept_code from module_domain_high_defense_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'host_scan_new' moduleType, dept_code from module_hostscan_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'custom' moduleType, dept_code from module_custom_res_apply
			union
			select id,apply_user_code,apply_user_name,apply_date_time,apply_status,'devops' moduleType, dept_code from module_deploy_res_apply
			union
			select id,apply_user_code,apply_user_name,apply_date_time,apply_status,'vpnpost' moduleType, dept_code from module_vpn_post_res_apply
			) tmp

			where tmp.id = #{orderId}
    </select>



	<select id="getAllOrder" resultType="com.nh.haiyan.ordermanager.mybatis.model.GetAllResApplyResp">

      select id resApplyId, apply_user_code applyUserCode, apply_user_name applyUserName, apply_date_time applyDateTime, apply_status applyStatus, moduleType, dept_code deptCode
	    from(
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'domain_scan_new' moduleType, dept_code from module_domain_scan_res_apply
			UNION
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'kvm_new' moduleType, dept_code from module_kvm_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'db_new' moduleType, dept_code from module_db_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'appDeploy_new' moduleType, dept_code from module_app_deploy_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'net-acl' moduleType, dept_code from module_net_security_policy_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'net-dns' moduleType, dept_code from module_dns_analyze_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'net-lvs' moduleType, dept_code from module_vip_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'cdn_cache_clean_new' moduleType, dept_code from module_cdn_cache_clean_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'cdn_link_up_new' moduleType, dept_code from module_cdn_link_up_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'code_auth_new' moduleType, dept_code from module_code_auth_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'jms' moduleType, dept_code from module_fortress_machine_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'nginx_conf_update_new' moduleType, dept_code from module_nginx_conf_update_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'code_scan_new' moduleType, dept_code from module_code_scan_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'net-gf' moduleType, dept_code from module_domain_high_defense_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'host_scan_new' moduleType, dept_code from module_hostscan_res_apply
			union
			select id, apply_user_code, apply_user_name, apply_date_time, apply_status, 'custom' moduleType, dept_code from module_custom_res_apply
			union
			select id,apply_user_code,apply_user_name,apply_date_time,apply_status,'devops' moduleType, dept_code from module_deploy_res_apply
			union
			select id,apply_user_code,apply_user_name,apply_date_time,apply_status,'vpnpost' moduleType, dept_code from module_vpn_post_res_apply
			) tmp
    </select>




</mapper>